<html>
	<head>
	<style>
	#mapid { height: 180px; }
	</style>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" integrity="sha512-07I2e+7D8p6he1SIM+1twR5TIrhUQn9+I6yjqD53JQjFiMf8EtC93ty0/5vJTZGF8aAocvHYNEDJajGdNx1IsQ==" crossorigin=""/>
	<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js" integrity="sha512-A7vV8IFfih/D732iSSKi20u/ooOfj/AGehOKq0f4vLT1Zr2Y+RX7C+w8A1gaSasGtRUZpF/NZgzSAu4/Gc41Lg==" crossorigin="">

	</script>
	</head>

	<body>
	<div id="mapid" style="width: 600px; height: 400px;"></div>
	<script>
		var mymap = L.map('mapid').setView([51.505, -0.09], 13);

		L.tileLayer
		(
			'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw',
			{
				maxZoom: 18,
				/*attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
				'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',*/
				id: 'mapbox.streets'
			}
		).addTo(mymap);

	function put_marker_text(x, y, text, id)
	{
		var marker = L.marker([y, x]).addTo(mymap);
		marker.bindPopup(text+"ID: "+id).openPopup();
	}
	
	function put_marker(x, y, id)
	{
		var marker = L.marker([y, x]).addTo(mymap);
		marker.bindPopup("ID: "+id).openPopup();
	}

	/*for (var i = 0; i <= 100; i+=20)
	{
		var circle = L.circle([51.5, -0.09], {
		color: 'red',
		fillColor: '#f03',
		fillOpacity: 0.15,
		radius: 50+i
		}).addTo(mymap);
	}*/
	function move(x, step, beginradius, minradius, maxradius)
	{
		x.step = step;
		var radius = beginradius;
		function f()
		{
			radius+=x.step;
			x.setRadius(radius);
			if (radius > maxradius)
			{
				x.step = -x.step;
			}
			else if (radius < minradius)
			{
				x.step = -x.step;
			}
		}
		setInterval(f, 80);
	}

	function set_pulsar(x, y)
	{
		var newcircle = L.circle([y, x], {
		color: 'red',
		fillColor: '#f03',
		fillOpacity: 0.2,
		radius: 50
		}).addTo(mymap);
		move(newcircle, 9, 5, 4, 300);
	}
	
	function set_safe_pulsar(x, y)
	{
		var newcircle = L.circle([y, x], {
		color: 'blue',
		fillColor: 'blue',
		fillOpacity: 0.2,
		radius: 10
		}).addTo(mymap);
		move(newcircle, 9, 5, 4, 70);
	}

	function set_multipulsar(x, y, amount)
	{
		var circ_amount = 0;
		function put_pulsar()
		{
			if (circ_amount < amount)
			{
				++circ_amount;
				set_pulsar(x, y);
			}
		}
		if (circ_amount < amount) setInterval(put_pulsar, 400);
	}

	function set_napalm(x, y)
	{
		put_marker_text(x, y, "Fire detected.<br>Emergency!<br>", 594519)
		set_multipulsar(x, y, 5);
	}

	function set_safe(x, y)
	{
		put_marker(x, y, 594520)
		set_safe_pulsar(x, y, 5);
	}

	set_napalm(-0.09, 51.5, 5);
	
	set_safe(-0.098, 51.505)



	/*
	autoupdate;
	read {BASE}
	for (id)
		display(sh, dg);
	*/
	</script>
	</body>
</html>